<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			.box{
				width: 600px;
				height: 400px;
				background:red;
			}
			.d1{
				width: 400px;
				height: 300px;
				background:yellow;
			}
			.d2{
				width: 300px;
				height: 200px;
				background:green;
			}
		</style>
	</head>
	<body>
		
		<div class="box">
			<div class="d1">
				<div class="d2">
					
				</div>
			</div>
		</div>
		
		
		<script>
			var box = document.querySelector(".box");
			var d1 = document.querySelector(".d1");
			var d2 = document.querySelector(".d2");
			
			d2.addEventListener("click",fn,true);		//捕获阶段	从上到下层层向下查找
			d2.addEventListener("click",fn,false);		//冒泡阶段	从下到上层层冒泡
			
			d1.addEventListener("click",fn,true);
			d1.addEventListener("click",fn,false);
			
			box.addEventListener("click",fn,true);
			box.addEventListener("click",fn,false);
			
			function fn(){
				alert(this.className);
			}
			
			/*
			 * 事件流: 当事件被触发时所经历的过程.
			 * 
			 * 当事件触发时,会经历3个阶段:
			 * 捕获阶段:  从document开始执行捕获,即事件会从document开始一级一级向下查找.在查找的过程中,若某一级节点绑定过捕获型事件函数,该事件处理函数就会执行;会继续向下查找,直到找到目标元素
			 * 
			 * 处于目标阶段: 查找到该目标元素(若绑定了处理函数则会执行)
			 * 
			 * 冒泡阶段: 从目标源对象开始向上一级将事件进行传递,若传递过程中,某一级节点绑定过冒泡型事件,则会执行对应的处理函数,直到document为止
			 */
			/*
			 * 特别注意：
			 * 1.IE下没有事件捕获阶段，只有事件冒泡（没有参数3）
			 * 2.大部分事件默认都是冒泡型事件，一般事件捕获很少用
			 * 3.通过on+事件名方式绑定事件，都是在冒泡阶段执行
			 */
			
			//mouseenter和mouseleave		不支持冒泡
//			d2.addEventListener("mouseenter",fn,false);
//			d1.addEventListener("mouseenter",fn,false);
		</script>
	</body>
</html>
